# ====================================================================
# Email Parser Service - Environment Configuration
# ====================================================================
#
# This service monitors email for Pickle Planner reservation emails
# and makes them available to the kiosk application.
#
# Uses Microsoft Graph API for OAuth2-based authentication and mailbox-level security.
# See GRAPH_API_SETUP.md for complete setup instructions.
#
# ====================================================================

# --------------------------------------------------------------------
# Microsoft Graph API Configuration
# --------------------------------------------------------------------
# Provides OAuth2-based authentication and mailbox-level security.
# See GRAPH_API_SETUP.md for complete setup instructions.
#
# To use Graph API, uncomment and configure these variables:

# GRAPH_TENANT_ID=your-tenant-id
# GRAPH_CLIENT_ID=your-client-id
# GRAPH_CLIENT_SECRET=your-client-secret
# GRAPH_USER_ID=your-email@example.com

# --------------------------------------------------------------------
# Service Configuration
# --------------------------------------------------------------------

# How often to check for new emails (in minutes)
# Default: 1 minute (fast updates)
EMAIL_CHECK_INTERVAL=1

# Feature flag to enable/disable email polling
# Set to "true" to enable email polling, "false" to disable
# When disabled, the service will still run but won't poll emails and will return empty reservation lists
ENABLE_EMAIL_POLLING=true

# Port for the email-parser service
PORT=3002

# --------------------------------------------------------------------
# Redis Configuration
# --------------------------------------------------------------------

# Redis connection URL
# Default: redis://localhost:6379
# Docker: redis://redis:6379
REDIS_URL=redis://localhost:6379

# --------------------------------------------------------------------
# Notes
# --------------------------------------------------------------------
#
# Reservation Storage:
# - Reservations are stored in Redis with 7-day TTL
# - Automatic cleanup of past reservations runs hourly
# - Reservation index maintained for fast queries
#
# Email Processing:
# - Only "Rally Club Reservation" emails are processed
# - Emails are marked as read after processing
# - Duplicate reservations are automatically detected and skipped
#
# Security:
# - Graph API: Client secrets should be kept secure
# - Redis: No authentication by default (add password for production)
#
# For detailed setup and troubleshooting, see:
# - GRAPH_API_SETUP.md (Microsoft Graph API setup)
# - README.md (Email parser documentation)
